(function(e,p){e.widget("ui.rlightbox",{options:{animationSpeed:"fast",setPrefix:"lb",showMap:!0,counterDelimiter:" / ",videoWidth:640,videoHeight:385,errorMessage:"Oh dear! Something went wrong! If the problem still appears let the page\u2019s admin know. Would you like to try again or reject the content?",againButtonLabel:"Try again",rejectButtonLabel:"Reject this content",overwriteTitle:!1,keys:{next:[78,39],previous:[80,37],close:[67,27],panorama:[90,null]},loop:!1},_create:function(){var a,b=
e.ui.rlightbox.global,c=this;b.getLightbox();a=b.extractAnchor(this);a.type!==p&&(b.addToSet(a),this.element.click(function(a){b.open(c);a.preventDefault()}))},_setOption:function(a,b){}});e.extend(e.ui.rlightbox,{global:{addToSet:function(a){var b=this.getSetName(a.self),c=e.ui.rlightbox.global.sets,d=e("."+a.self.options.setPrefix+"_"+b).index(a.element);c[b]?c[b].splice(d,0,a):(c[b]=[],c[b].push(a))},checkButtonsState:function(){var a=this.data,b=this.$lightbox,c=a.totalElementsNumber,d=a.currentElementNumber,
f=a.currentSetElement.self.options.loop;"single"===a.currentSet||1===c?this.setButtonState("disabled"):1===d&&!1===f?(this.setButtonState("disabled",b.prev),this.setButtonState("default",b.next)):d===c&&!1===f?(this.setButtonState("disabled",b.next),this.setButtonState("default",b.prev)):this.setButtonState("default")},checkMinimalSize:function(a,b){var c=this.data.minimalLightboxSize,d=c.width,c=c.height;if("width"===a)return b<d?d:b;if("height"===a)return b<c?c:b},closeLightbox:function(){var a=
this.data,b=this.$lightbox;a.ready&&(b.overlay.add(b.root).add(b.header).hide(),e("body").css("overflow","visible"),b.content.empty().width(20).height(20),this.hideArrow(),this.setButtonState("default"),this.panoramaHideIcon(),a.currentElementNumber=null,a.totalElementsNumber=null,b.title.empty(),this.panoramaHideMap(),a.ready=!1)},createStructure:function(){var a=this.data;e(a.htmlLightbox).appendTo("body").after(a.htmlMap).after(a.htmlOverlay)},destroy:function(){this.data.currentSetElement.element.unbind(".rlightbox").unbind("click").removeData("rlightbox")},
extractAnchor:function(a){var b={type:p},c=e(a.element),d=c.attr("href");e.each({youtube:{urls:[/(http:\/\/www\.youtube\.com\/watch\?v=([\w-_]+))&?/],type:"youtube"},image:{urls:[/.jpg$|.png$|.gif$/],type:"image"},vimeo:{urls:[/(http:\/\/vimeo\.com\/groups\/\w+\/videos\/(\w+))&?/,/(http:\/\/vimeo\.com\/(\w+))&?/],type:"vimeo"},flash:{urls:[/.swf/],type:"flash"}},function(f,g){var k=!1;e.each(g.urls,function(f,e){var m=e.exec(d);if(null!==m){b={url:m[1],id:m[2],type:g.type,element:c,self:a};if("image"===
g.type||"flash"===g.type||a.options.overwriteTitle)b.title=c.attr("title"),b.url=d;k=!0;return!1}});if(k)return!1});return b},getAvailableScreenSize:function(){var a=this.data,b=a.lightboxPadding;return{width:this.getWindowSize("width")-b,height:this.getWindowSize("height")-a.headerHeight-b}},getCurrentElementNumber:function(a){var b;e.each(this.sets[this.data.currentSet],function(c,d){if(e(a).get(0)===d.element.get(0))return b=c+1,!1});return b},getImageStatus:function(a,b){var c=this.data,d=this.getWindowSize("width"),
f=this.getWindowSize("height"),g=c.minimalLightboxSize.width,e=c.minimalLightboxSize.height,h=c.lightboxPadding,c=c.headerHeight;return{statusWidth:a<=g?-1:a>g&&a+h<=d?1:2,statusHeight:b<=e?-1:b>e&&f>=b+h+c?1:2}},getLightbox:function(){var a=this.data,b=this.$lightbox,c=this;b.root||(this.createStructure(),this.setReferences(),b.close.add(b.overlay).click(e.proxy(this.closeLightbox,this)),b.next.click(e.proxy(this.next,this)),b.prev.click(e.proxy(this.prev,this)),b.next.add(b.prev).add(b.next).add(b.close).hover(function(){e(this).is(":not(.ui-state-disabled)")&&
c.setButtonState("highlight",e(this))},function(){e(this).is(":not(.ui-state-disabled)")&&c.setButtonState("default",e(this))}),b.contentContainer.mousemove(e.proxy(this.showArrow,this)).mousemove(e.proxy(this.checkSide,this)).mousemove(e.proxy(this.setCursor,this)).click(function(){"left"===a.side?c.prev.apply(c):"right"===a.side&&c.next.apply(c)}).mousedown(e.proxy(this.panoramaStart,this)).mouseup(e.proxy(this.panoramaStop,this)).mouseleave(function(){c.hideArrow.apply(c);a.side=""}),b.panoramaIcon.click(e.proxy(this.panoramaToggle,
this)).hover(e.proxy(this.panoramaHighlight,this)),e(window).bind("resize.rlightbox",e.proxy(this.liveResize,this)),e(document).keyup(e.proxy(this.handleKeyboard,this)))},getOptimalSize:function(a,b){var c=this.data.minimalLightboxSize,d=c.width,c=c.height,f=this.getAvailableScreenSize(),g=f.width,f=f.height;if("width"===a)return b<d?d:b>g?g:b;if("height"===a)return b<c?c:b>f?f:b},getParam:function(a,b){var c;c=(new RegExp("[\\?&]"+a+"=(\\w+)")).exec(b);return null!==c?c[1]:null},getSetName:function(a){var b=
e(a.element).attr("class");return(a=(new RegExp(a.options.setPrefix+"_([\\w-_]+)")).exec(b))?a[1]:"single"},checkSide:function(a){var b=this.data,c=this.$lightbox.contentContainer,d=a.pageX-c.offset().left,c=Math.round(c.width()/2);d<=c?b.side="left":d>c&&(b.side="right");a.preventDefault()},getSizes:function(){function a(n,q){b=y.getImageStatus(n,q);c=b.statusWidth;d=b.statusHeight;if(!(1!==c&&-1!==c||2===d||1!==d&&-1!==d||2===c))1===c?e=n:-1===c&&(e=v),f=n,1===d?h=q:-1===d&&(h=w),g=q;else if(2===
c||2===d)1===c||-1===c?(g=h=p-u-r,l=h/q,-1===c?(e=v,f=Math.ceil(n*l)):(f=e=Math.ceil(n*l)-r,f<=v&&a(f,g))):1===d||-1===d?(f=e=x-r,m=e/n,-1===d?(h=w,g=Math.ceil(q*m)):(g=h=Math.ceil(q*m)-u-r,g<=w&&a(f,g))):n>q?(f=e=x-r,m=e/n,g=h=Math.ceil(q*m)-r-u,(g<=w||h+r+u>p)&&a(f,g)):(g=h=p-u-r,l=h/q,f=e=Math.ceil(n*l)-r,(f<=v||e>x)&&a(f,g))}var b,c,d,f,g,e,h,l,m,n=this.data,y=this,t=n.currentSetElement,x=this.getWindowSize("width"),p=this.getWindowSize("height"),v=n.minimalLightboxSize.width,w=n.minimalLightboxSize.height,
r=n.lightboxPadding,u=n.headerHeight;a(t.width,t.height);return{imageTargetWidth:f,imageTargetHeight:g,lightboxTargetWidth:e,lightboxTargetHeight:h,statusWidth:c,statusHeight:d}},getWindowSize:function(a){var b=this.data,c=e(window).width(),d=e(window).height(),f=b.minimalLightboxSize,g=b.lightboxPadding,k=f.width+g,b=f.height+g+b.headerHeight;return"width"===a?c<k?k:c:d<b?b:d},handleKeyboard:function(a){var b=this.data,c=b.currentSetElement,d=_options.keys,f=a.which;!1!==b.ready&&(f===d.next[0]||
f===d.next[1]?this.next():f===d.previous[0]||f===d.previous[1]?this.prev():f===d.close[0]||f===d.close[1]?this.closeLightbox():f!==d.panorama[0]&&f!==d.panorama[1]||"image"!==c.type||this.panoramaToggle(a))},hideArrow:function(){this.$lightbox.arrow.hide()},liveResize:function(){var a=this.data,b=a.currentSetElement.type;a.ready&&!1===a.panoramaOn&&"image"===b?(this.queueResizeLightbox(),this.updateTitleWidth(),this.queueCenterContent(),this.panoramaCheckAvailability()):a.ready&&a.panoramaOn&&"image"===
b?(this.queueCenterLightbox(),this.panoramaShrink(),this.panoramaCheckAvailability()):a.ready&&"image"!==b&&this.queueCenterLightbox()},loadContentFlash:function(a){var b,c,d,f=this.data,g=this,k=this.$lightbox.content,h=e.Deferred(),l=f.htmlFlash,m=f.currentSetElement,n=m.self.options;k.addClass("ui-lightbox-loader");setTimeout(function(){b=g.getParam("width",a);c=g.getParam("height",a);if(null===b||isNaN(b))b=n.videoWidth;if(null===c||isNaN(c))c=n.videoHeight;m.width=b;m.height=c;l=g.replaceHtmlPatterns(l,
{width:b,height:c,url:a});d=e("<div></div>");d.css({display:"none",width:b,height:c});k.removeClass("ui-lightbox-loader").empty().append(l).children().wrap(d);h.resolve()},1E3);return h.promise()},loadContentImage:function(a){var b=this.$lightbox,c=this,d=this.data.currentSetElement,f=e.Deferred(),g=e("<img />");b.content.addClass("ui-lightbox-loader");g.attr("src",a).bind("load",function(){e(this).unbind("load");d.width=this.width;d.height=this.height;b.content.removeClass("ui-lightbox-loader").empty().append(this).children().hide();
f.resolve()}).error(function(){b.content.removeClass("ui-lightbox-loader");c.showErrorMessage();f.resolve()}).each(function(){if(this.complete||this.complete===p){var a=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=a}});return f.promise()},loadContentVimeo:function(a){var b=this.data,c=this.$lightbox,d=this,f=e.Deferred(),g=b.providers.vimeo,k=b.currentSetElement,h=k.self.options;c.content.addClass("ui-lightbox-loader");e.ajax({url:g,data:{url:a,
maxwidth:h.videoWidth,maxheight:h.videoHeight},dataType:"jsonp",timeout:5E3}).success(function(a){c.content.removeClass("ui-lightbox-loader").empty().append(a.html).children().wrap("<div style='display: none'></div>").end().find("div:first").width(a.width).height(a.height);!1===h.overwriteTitle&&(k.title=a.title);k.width=a.width;k.height=a.height;f.resolve()}).error(function(){c.content.removeClass("ui-lightbox-loader");d.showErrorMessage();f.resolve()});return f.promise()},loadContentYoutube:function(a){function b(){d.content.removeClass("ui-lightbox-loader");
g.showErrorMessage();k.resolve()}var c;a=this.data;var d=this.$lightbox,f=d.content,g=this,k=e.Deferred(),h=a.providers.youtube,l=a.currentSetElement,m=l.self.options,n=m.videoWidth,p=m.videoHeight,t=a.htmlYoutube;d.content.addClass("ui-lightbox-loader");e.ajax({url:h+l.id+"?callback=?",data:{v:2,alt:"jsonc",prettyprint:!0},dataType:"jsonp",timeout:5E3}).success(function(a){a.error?b():(t=g.replaceHtmlPatterns(t,{width:n,height:p,url:l.id}),c=e("<div></div>"),c.css({display:"none",width:n,height:p}),
f.removeClass("ui-lightbox-loader").empty().append(t).children().wrap(c),!1===m.overwriteTitle&&(l.title=a.data.title),l.width=n,l.height=p,k.resolve())}).error(function(){b()});return k.promise()},navigationGoToElement:function(a){var b=this.data,c=this.sets,d=this.$lightbox,f=b.currentSet;b.currentElementNumber=a;b.currentSetElement=c[f][a-1];this.setNextQueue();d.queueContainer.next.dequeue("lightboxNext")},next:function(){var a=this.data,b=this.sets,c=this.$lightbox,d=a.panoramaOn,f=a.currentSet,
g=a.currentElementNumber,e=a.totalElementsNumber,h=a.currentSetElement.self.options.loop,l=!0;a.ready&&"single"!==f&&!1===d&&(g+1<=e?a.currentElementNumber=g+=1:g+1>e&&h?a.currentElementNumber=g=1:l=!1,l&&(a.currentSetElement=b[f][g-1],this.setNextQueue(),c.queueContainer.next.dequeue("lightboxNext")))},open:function(a){var b=this.data,c=this.sets,d=this.$lightbox,f=a.element;a=this.getSetName(a);e(f).attr("href");b.currentSet=a;b.totalElementsNumber=c[a].length;b.currentElementNumber=this.getCurrentElementNumber(f);
b.currentSetElement=c[a][b.currentElementNumber-1];this.setOpenQueue();this.setNextQueue();this.checkButtonsState();d.queueContainer.open.dequeue("lightboxOpen")},panoramaCenterContent:function(){var a,b,c=this.$lightbox,d=this.data.currentSetElement;b=this.getAvailableScreenSize();a=b.width;b=b.height;var f=d.width,d=d.height,g=c.content,c=g.find("img");a=a<f?0:g.width()/2-c.width()/2;b=b<d?0:g.height()/2-c.height()/2;c.css({top:b,left:a})},panoramaCheckAvailability:function(){var a=this.data,b=
a.currentSetElement,c=b.height,d=b.currentHeight;b.currentWidth<b.width||d<c?(this.panoramaShowIcon("expand"),a.enablePanorama=!0):(a.enablePanorama=!1,this.panoramaHideIcon())},panoramaExpand:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement,f=d.self.options;b.panoramaOn=!0;"click"===a.type?this.panoramaShowIcon("shrink","-hover"):this.panoramaShowIcon("shrink");c.content.css("overflow","hidden");c.content.find("img").width(d.width).height(d.height);this.panoramaSetContentSize();
this.panoramaCenterContent();this.queueCenterLightbox();this.updateTitleWidth();f.showMap&&this.panoramaShowMap();this.hideArrow();this.setCursor()},panoramaHideIcon:function(){var a=this.data;this.$lightbox.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink");a.panoramaOn=!1},panoramaHideMap:function(){var a=this.$lightbox;a.map.hide();a.viewport.css({left:-1,top:-1})},panoramaHighlight:function(){var a;this.$lightbox.panoramaIcon.attr("class",function(b,
c){a=c.indexOf("-hover");return-1!==a?c.slice(0,a):c+"-hover"})},panoramaSetContentSize:function(){var a,b=this.data,c=this.$lightbox;a=b.currentSetElement;var d=b.minimalLightboxSize,b=d.width,f=d.height,g=this.getAvailableScreenSize(),d=g.width,e=g.height,g=a.width;a=a.height;a=a>e?e:a<=f?f:a;c.content.width(g>d?d:g<=b?b:g).height(a)},panoramaShowIcon:function(a,b){var c="ui-lightbox-panorama-icon-"+a+(b||"");this.$lightbox.panoramaIcon.show().removeClass().addClass(c)},panoramaShowMap:function(){var a,
b,c,d,f,e=this.data;a=e.minimalLightboxSize;var k=this.$lightbox;b=k.content;c=b.find("img");f=c.width();var h=c.height();d=e.currentSetElement;var l=e.mapSize;c=l.width/d.width;d=l.height/d.height;f=f<a.width?f:b.width();b=h<a.height?h:b.height();a=Math.ceil(f*c);b=Math.ceil(b*d);k.viewport.width(a).height(b);k.map.show();e.viewportRatio={width:c,height:d}},panoramaShrink:function(a){var b=this.$lightbox;this.data.panoramaOn=!1;a&&"click"===a.type?this.panoramaShowIcon("expand","-hover"):this.panoramaShowIcon("expand");
this.queueResizeLightbox();this.queueCenterContent();b.content.css("overflow","visible");this.updateTitleWidth();this.panoramaHideMap();this.setCursor()},panoramaStart:function(a){this.data.panoramaPosition={xStart:a.pageX,yStart:a.pageY};a.preventDefault()},panoramaStop:function(a){var b=this.data,c=this.$lightbox,d=-1*(a.pageX-b.panoramaPosition.xStart),f=-1*(a.pageY-b.panoramaPosition.yStart),e=c.content,k=b.viewportRatio;b.panoramaOn&&(e.scrollLeft(e.scrollLeft()+d).scrollTop(e.scrollTop()+f),
c.viewport.css({left:e.scrollLeft()*k.width-1,top:e.scrollTop()*k.height-1}));a.stopPropagation()},panoramaToggle:function(a){var b=this.data,c=b.panoramaOn;(b=b.enablePanorama)&&!1===c?this.panoramaExpand(a):b&&c&&this.panoramaShrink(a)},prev:function(){var a=this.data,b=this.sets,c=this.$lightbox,d=a.panoramaOn,f=a.currentSet,e=a.currentElementNumber,k=a.totalElementsNumber,h=a.currentSetElement.self.options.loop,l=!0;a.ready&&"single"!==f&&!1===d&&(1<=e-1?a.currentElementNumber=--e:1>e-1&&h?a.currentElementNumber=
e=k:l=!1,l&&(a.currentSetElement=b[f][e-1],this.setNextQueue(),c.queueContainer.next.dequeue("lightboxNext")))},removeSetElement:function(a){var b=this.data,c=this.sets,d=b.currentSet,e=b.totalElementsNumber;c[d].splice(a-1,1);1===e||"single"===d?(this.closeLightbox(),this.destroy()):(this.destroy(),b.totalElementsNumber=c[d].length,a===e?this.navigationGoToElement(a-1):this.navigationGoToElement(a))},replaceHtmlPatterns:function(a,b){e.each(b,function(b,d){a=a.replace(new RegExp("{"+b+"}","g"),d)});
return a},setButtonState:function(a,b){var c=this.$lightbox,c=b||c.controlButtons;switch(a){case "default":c.removeClass("ui-state-highlight ui-state-disabled");break;case "highlight":c.addClass("ui-state-highlight");break;case "disabled":c.addClass("ui-state-disabled")}},setCursor:function(a){var b=this.data,c=this.$lightbox.contentContainer,d=b.currentSet,e=b.currentSetElement.type,g=b.totalElementsNumber,k=b.currentElementNumber,h=b.side,l=b.panoramaOn,m=b.showErrorMessage,n=b.currentSetElement.self.options.loop;
b.ready?("single"===d||1===g||1===k&&"left"===h||k===g&&"right"===h)&&!1===l&&("image"===e||"image"!==e&&m)?!1===n?c.css("cursor","default"):c.css("cursor","pointer"):l?c.css("cursor","move"):"image"===e||"image"!==e&&m?c.css("cursor","pointer"):c.css("cursor","auto"):c.css("cursor","default");a&&a.preventDefault()},setNextQueue:function(){var a=this.$lightbox,b=[e.proxy(this.queueSlideUpHeader,this),e.proxy(this.queueHideContent,this),e.proxy(this.queueLoadContent,this),e.proxy(this.queueResizeLightbox,
this),e.proxy(this.queueCenterContent,this),e.proxy(this.queueShowContent,this),e.proxy(this.queueSlideDownHeader,this)];a.queueContainer.next.queue("lightboxNext",b)},setOpenQueue:function(){var a=this.$lightbox,b=[e.proxy(this.queueShowOverlay,this),e.proxy(this.queueCenterLightbox,this),e.proxy(this.queueLoadContent,this),e.proxy(this.queueResizeLightbox,this),e.proxy(this.queueCenterContent,this),e.proxy(this.queueShowContent,this),e.proxy(this.queueSlideDownHeader,this)];a.queueContainer.open.queue("lightboxOpen",
b)},setReferences:function(){var a=this.$lightbox;a.root=e("#ui-lightbox");a.panoramaIcon=a.root.find("#ui-lightbox-panorama-icon");a.contentContainer=a.root.find("#ui-lightbox-content-container");a.content=a.contentContainer.find("#ui-lightbox-content");a.arrow=a.contentContainer.find("#ui-lightbox-arrow");a.header=a.root.find("#ui-lightbox-bottombar");a.headerWrapper=a.header.find("#ui-lightbox-title-wrapper");a.overlay=e("#ui-lightbox-overlay");a.next=a.root.find("#ui-lightbox-button-next");a.prev=
a.root.find("#ui-lightbox-button-prev");a.controlButtons=a.next.add(a.prev);a.close=a.root.find("#ui-lightbox-button-close");a.counter=a.root.find("#ui-lightbox-counter");a.title=a.root.find("#ui-lightbox-title");a.map=e("#ui-lightbox-map");a.viewport=a.map.children().eq(0);a.queueContainer={open:e({}),next:e({})}},showArrow:function(a){var b=this.data,c=this.$lightbox.arrow,d=b.showErrorMessage,e=b.side,g=b.currentElementNumber,k=b.totalElementsNumber,h=b.currentSetElement.self.options.loop;b.ready&&
"single"!==b.currentSet&&("image"===b.currentSetElement.type||d)&&!1===b.panoramaOn&&("left"===e&&(1<g||h)?c.show().removeClass("ui-lightbox-arrow-next ui-corner-left").addClass("ui-lightbox-arrow-prev ui-corner-right").find("span").removeClass("ui-icon-carat-1-e").addClass("ui-icon-carat-1-w"):"right"===e&&(g<k||h)?c.show().removeClass("ui-lightbox-arrow-prev ui-corner-right").addClass("ui-lightbox-arrow-next ui-corner-left").find("span").removeClass("ui-icon-carat-1-w").addClass("ui-icon-carat-1-e"):
this.hideArrow());a&&a.preventDefault()},showErrorMessage:function(){var a,b,c,d=this.data,f=this.$lightbox,g=this;a=d.currentSetElement.self.options;var k=d.currentElementNumber;b=d.htmlErrorScreen;var h=d.errorScreenSize,l=h.width,h=h.height;b=g.replaceHtmlPatterns(b,{message:a.errorMessage,labelAgain:a.againButtonLabel,labelReject:a.rejectButtonLabel});c=e(b);a=c.find("#ui-lightbox-error-footer-again");b=c.find("#ui-lightbox-error-footer-reject");a.click(function(){g.navigationGoToElement(k)}).hover(function(){e(this).toggleClass("ui-state-hover")});
b.click(function(){g.removeSetElement(k)}).hover(function(){e(this).toggleClass("ui-state-hover")});f.content.empty().append(c).find("#ui-lightbox-error").width(l).height(h).end().children().hide();d.showErrorMessage=!0},updateCounter:function(){var a,b;b=this.data;var c=this.$lightbox,d=b.currentSetElement.self.options;"single"!==b.currentSet?(a=b.currentElementNumber,b=b.totalElementsNumber):b=a=1;c.counter.text(a+d.counterDelimiter+b)},updateTitle:function(){var a=this.$lightbox,b=this.data.currentSetElement;
""!==b.title?a.title.empty().append(b.title):a.title.append("&nbsp;")},updateTitleWidth:function(){var a=this.$lightbox;a.header.width(a.content.width()-12)},queueHideContent:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement.self.options;c.content.children().fadeOut(d.animationSpeed,function(){e(this).remove();a()});c.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink");b.panoramaOn=!1;this.panoramaHideMap()},queueShowOverlay:function(a){var b=
this.data,c=this.$lightbox,d=b.currentSetElement.self;b.ready=!1;this.setCursor();c.overlay.fadeIn(d.options.animationSpeed,a)},queueCenterLightbox:function(a){var b=this.$lightbox.root,c=this.getWindowSize("width"),d=this.getWindowSize("height"),e=b.outerWidth(),g=b.outerHeight();b.css({left:Math.round((c-e)/2)+"px",top:Math.round((d-g)/2)+"px"}).show(0,a)},queueLoadContent:function(a){var b,c=this.data,d=c.currentSetElement;c.showErrorMessage=!1;switch(d.type){case "image":b="loadContentImage";
break;case "youtube":b="loadContentYoutube";break;case "vimeo":b="loadContentVimeo";break;case "flash":b="loadContentFlash"}e.when(this[b](d.url)).then(function(){a()})},queueResizeLightbox:function(a){var b,c,d,f,g;f=this.data;var k=this.$lightbox,h=f.lightboxPadding,l=f.headerHeight,m=f.currentSetElement,n=m.self.options;d=f.showErrorMessage;b=f.errorScreenSize;f=b.width;var p=b.height;b=n.animationSpeed;"image"===m.type&&!1===d?(c=this.getSizes(),d=c.imageTargetWidth,f=c.imageTargetHeight,g=c.lightboxTargetWidth,
c=c.lightboxTargetHeight,b=k.content.find("img"),m.currentWidth=d,m.currentHeight=f,b.width(d).height(f),b=e.isFunction(a)?n.animationSpeed:0):"youtube"!==m.type&&"vimeo"!==m.type||!1!==d?"flash"===m.type&&!1===d?(g=this.getOptimalSize("width",m.width),c=this.getOptimalSize("height",m.height)):d&&(b=0,g=f,c=p):(g=this.checkMinimalSize("width",m.width),c=this.checkMinimalSize("height",m.height));k.root.find("#ui-lightbox-content").animate({width:g},b).animate({height:c},b).end().animate({left:(this.getWindowSize("width")-
g-h)/2},b).animate({top:(this.getWindowSize("height")-c-h-l)/2},b,a)},queueCenterContent:function(a){var b=this.$lightbox.content,c=b.children();b.children().css({top:b.height()/2-c.outerHeight()/2,left:b.width()/2-c.outerWidth()/2});a&&a()},queueShowContent:function(a){var b=this.data,c=this,d=b.currentSetElement,e=d.self.options,g=b.showErrorMessage;this.$lightbox.content.children().fadeIn(e.animationSpeed,function(){"image"===d.type&&!1===g&&c.panoramaCheckAvailability();a()})},queueSlideDownHeader:function(a){var b=
this.data;this.$lightbox.header.slideDown(b.currentSetElement.self.options.animationSpeed,a);this.updateCounter();this.updateTitleWidth();this.updateTitle();this.checkButtonsState();b.ready=!0;this.setCursor();this.showArrow()},queueSlideUpHeader:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement.self.options;b.ready=!1;this.hideArrow();this.setCursor();c.header.slideUp(d.animationSpeed,a)},$lightbox:{},sets:{},data:{minimalLightboxSize:{width:300,height:300},lightboxPadding:12,headerHeight:57,
ready:!1,panoramaOn:!1,mapSize:{width:150,height:100},providers:{vimeo:"http://www.vimeo.com/api/oembed.json?callback=?",youtube:"http://gdata.youtube.com/feeds/api/videos/"},showErrorMessage:!1,currentSetElement:{},enablePanorama:!1,errorScreenSize:{width:500,height:500},htmlFlash:"<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width='{width}' height='{height}'><param name='movie' value='{url}' />\x3c!--[if !IE]>--\x3e<object type='application/x-shockwave-flash' data='{url}' width='{width}' height='{height}'>\x3c!--<![endif]--\x3e\x3c!--[if !IE]>--\x3e</object>\x3c!--<![endif]--\x3e</object>",
htmlErrorScreen:"<div id='ui-lightbox-error'><div id='ui-lightbox-error-message' class='ui-lightbox-error-icon-sign'>{message}</div><div id='ui-lightbox-error-footer'><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-again' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-refresh'></span><span class='ui-button-text'>{labelAgain}</span></button><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-reject' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-trash'></span><span class='ui-button-text'>{labelReject}</span></button></div></div>",
htmlYoutube:"<iframe class='youtube-player' type='text/html' width='{width}' height='{height}' src='http://www.youtube.com/embed/{url}' frameborder='0'></iframe>",htmlLightbox:"<div id='ui-lightbox' class='ui-widget ui-widget-content ui-corner-all' style='display: none'><div id='ui-lightbox-content-container'><div id='ui-lightbox-content' class='ui-widget-content'></div><a id='ui-lightbox-arrow' class='ui-widget-header' style='display: none'><span class='ui-icon'>go</span></a></div><div id='ui-lightbox-bottombar' class='ui-widget-header ui-corner-all' style='display: none'><p id='ui-lightbox-title-wrapper'><span id='ui-lightbox-title'></span></p><p id='ui-lightbox-bottombar-bottom'><a id='ui-lightbox-button-prev' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-w'>prev</span></a><span id='ui-lightbox-counter'></span><a id='ui-lightbox-button-next' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-e'>next</span></a></p><a id='ui-lightbox-button-close' class='ui-lightbox-button'><span class='ui-icon ui-icon-closethick'>close</span></a><div id='ui-lightbox-panorama-icon' style='display: none'></div></div></div>",
htmlMap:"<div id='ui-lightbox-map' style='display: none'><div id='ui-lightbox-map-viewport'></div></div>",htmlOverlay:"<div id='ui-lightbox-overlay' class='ui-widget-overlay' style='display: none'></div>"}}})})(jQuery);
