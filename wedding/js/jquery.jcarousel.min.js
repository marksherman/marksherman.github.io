(function(d){var b=d.jCarousel={};b.version="0.3.0-beta";var g=/^([+\-]=)?(.+)$/;b.parseTarget=function(a){var e=!1,c="object"!=typeof a?g.exec(a):null;return c?(a=parseInt(c[2],10)||0,c[1]&&(e=!0,"-="===c[1]&&(a*=-1))):"object"!=typeof a&&(a=parseInt(a,10)||0),{target:a,relative:e}};b.detectCarousel=function(a){for(var e;0<a.size();){e=a.filter("[data-jcarousel]");if(0<e.size())return e;e=a.find("[data-jcarousel]");if(0<e.size())return e;a=a.parent()}return null};b.base=function(a){return{version:b.version,
_options:{},_element:null,_carousel:null,_init:d.noop,_create:d.noop,_destroy:d.noop,_reload:d.noop,create:function(){return this._element.attr("data-"+a.toLowerCase(),!0).data(a,this),!1===this._trigger("create")?this:(this._create(),this._trigger("createend"),this)},destroy:function(){return!1===this._trigger("destroy")?this:(this._destroy(),this._trigger("destroyend"),this._element.removeData(a).removeAttr("data-"+a.toLowerCase()),this)},reload:function(a){return!1===this._trigger("reload")?this:
(a&&this.options(a),this._reload(),this._trigger("reloadend"),this)},element:function(){return this._element},options:function(a,c){if(0===arguments.length)return d.extend({},this._options);if("string"==typeof a){if("undefined"==typeof c)return"undefined"==typeof this._options[a]?null:this._options[a];this._options[a]=c}else this._options=d.extend({},this._options,a);return this},carousel:function(){return this._carousel||(this._carousel=b.detectCarousel(this.options("carousel")||this._element),this._carousel||
d.error('Could not detect carousel for plugin "'+a+'"')),this._carousel},_trigger:function(e,c,k){e=d.Event((e+"."+a).toLowerCase());return(c||this._element).trigger(e,[this].concat(k||[])),!e.isDefaultPrevented()}}};b.plugin=function(a,e){var c=d[a]=function(a,e){this._element=d(a);this.options(e);this._init();this.create()};return c.fn=c.prototype=d.extend({},b.base(a),e),d.fn[a]=function(e){var b=Array.prototype.slice.call(arguments,1),h=this;return"string"==typeof e?this.each(function(){var c=
d(this).data(a);if(!c)return d.error("Cannot call methods on "+a+' prior to initialization; attempted to call method "'+e+'"');if(!d.isFunction(c[e])||"_"===e.charAt(0))return d.error('No such method "'+e+'" for '+a+" instance");var g=c[e].apply(c,b);if(g!==c&&"undefined"!=typeof g)return h=g,!1}):this.each(function(){var b=d(this).data(a);b?b.reload(e):new c(this,e)}),h},c}})(jQuery);
(function(d,b){var g=function(a){return parseFloat(a)||0};d.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:null,_first:null,_last:null,_visible:null,_fullyvisible:null,_init:function(){var a=this;return this.onWindowResize=function(){a.resizeTimer&&
clearTimeout(a.resizeTimer);a.resizeTimer=setTimeout(function(){a.reload()},100)},this.onAnimationComplete=function(e){a.animating=!1;var c=a.list().find("[data-jcarousel-clone]");0<c.size()&&(c.remove(),a._reload());a._trigger("animateend");d.isFunction(e)&&e.call(a,!0)},this},_create:function(){this._reload();d(b).bind("resize.jcarousel",this.onWindowResize)},_destroy:function(){d(b).unbind("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical");null==
this.vertical&&(this.vertical=this.list().height()>this.list().width());this.rtl=this.options("rtl");null==this.rtl&&(this.rtl=function(a){if("rtl"===(""+a.attr("dir")).toLowerCase())return!0;var c=!1;return a.parents("[dir]").each(function(){if(/rtl/i.test(d(this).attr("dir")))return c=!0,!1}),c}(this._element));this.lt=this.vertical?"top":"left";this._items=null;var a=this._target&&0<=this.index(this._target)?this._target:this.closest();return this.circular="circular"===this.options("wrap"),0<a.size()?
(this._prepare(a),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.circular="circular"===this.options("wrap")&&this._fullyvisible.size()<this.items().size(),this.list().css(this.lt,this._position(a)+"px")):this.list().css({left:0,top:0}),this},list:function(){if(null===this._list){var a=this.options("list");this._list=d.isFunction(a)?a.call(this):this._element.find(a)}return this._list},items:function(){if(null===this._items){var a=this.options("items");this._items=(d.isFunction(a)?
a.call(this):this.list().find(a)).not("[data-jcarousel-clone]")}return this._items},index:function(a){return this.items().index(a)},closest:function(){var a=this,e=this.list().position()[this.lt],c=d(),b=!1,f=this.vertical?"bottom":this.rtl?"left":"right",h;return this.rtl&&!this.vertical&&(e=-1*(e+this.list().width()-this.clipping())),this.items().each(function(){c=d(this);if(b)return!1;var l=a.dimension(c);e+=l;if(0<=e){h=l-g(c.css("margin-"+f));if(!(0>=Math.abs(e)-l+h/2))return!1;b=!0}}),c},target:function(){return this._target},
first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var a=this.options("wrap"),e=this.items().size()-1;return 0<=e&&(a&&"first"!==a||this.index(this._last)<e||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var a=this.options("wrap");return 0<this.items().size()&&(a&&"last"!==a||0<this.index(this._first)||
this.tail&&this.inTail)?!0:!1},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(a){return a["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(a,e,c){if(this.animating||!1===this._trigger("scroll",null,[a,e]))return this;d.isFunction(e)&&(c=e,e=!0);var b=d.jCarousel.parseTarget(a);if(b.relative){a=this.items().size()-1;var f=Math.abs(b.target),h=this.options("wrap"),l;if(0<b.target)if(b=this.index(this._last),b>=a&&this.tail)this.inTail?
"both"===h||"last"===h?this._scroll(0,e,c):this._scroll(Math.min(this.index(this._target)+f,a),e,c):this._scrollTail(e,c);else if(b!==a||"both"!==h&&"last"!==h)if(l=this.index(this._target),b=l+f,this.circular&&b>a){f=a;for(a=this.items().get(-1);f++<b;)a=this.items().eq(0),a.after(a.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(a),this._items=null;this._scroll(a,e,c)}else this._scroll(Math.min(b,a),e,c);else this._scroll(0,e,c);else if(this.inTail)this._scroll(Math.max(this.index(this._first)-
f+1,0),e,c);else if(l=this.index(this._first),b=l-f,0!==l||"both"!==h&&"first"!==h)if(this.circular&&0>b){f=b;for(a=this.items().get(0);0>f++;)a=this.items().eq(-1),a.after(a.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(a),this._items=null,h=g(this.list().css(this.lt)),b=this.dimension(a),this.rtl&&!this.vertical?h+=b:h-=b,this.list().css(this.lt,h+"px");this._scroll(a,e,c)}else this._scroll(Math.max(l-f,0),e,c);else this._scroll(a,e,c)}else this._scroll(b.target,e,c);return this._trigger("scrollend"),
this},_scroll:function(a,e,c){if(this.animating)return d.isFunction(c)&&c.call(this,!1),this;"object"!=typeof a?a=this.items().eq(a):"undefined"==typeof a.jquery&&(a=d(a));if(0===a.size())return d.isFunction(c)&&c.call(this,!1),this;this.inTail=!1;this._prepare(a);a=this._position(a);var b=g(this.list().css(this.lt));if(a===b)return d.isFunction(c)&&c.call(this,!1),this;b={};return b[this.lt]=a+"px",this._animate(b,e,c),this},_scrollTail:function(a,b){if(this.animating||!this.tail)return d.isFunction(b)&&
b.call(this,!1),this;var c=this.list().position()[this.lt];this.rtl?c+=this.tail:c-=this.tail;this.inTail=!0;var g={};return g[this.lt]=c+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(g,a,b),this},_animate:function(a,b,c){if(!1===this._trigger("animate"))return d.isFunction(c)&&c.call(this,!1),this;this.animating=!0;var g=this.options("animation");if(g&&!1!==b){var f=this;if(d.isFunction(g))g.call(this,a,function(){f.onAnimationComplete(c)});
else{b="object"==typeof g?d.extend({},g):{duration:g};var h=b.complete;b.complete=function(){f.onAnimationComplete(c);d.isFunction(h)&&h.call(this)};this.list().animate(a,b)}}else this.list().css(a),this.onAnimationComplete(c);return this},_prepare:function(a){var b=this.index(a),c=b,k=this.dimension(a),f=this.clipping(),h=this.vertical?"bottom":this.rtl?"left":"right",l={target:a,first:a,last:a,visible:a,fullyvisible:k<=f?a:d()},m,n;this.options("center")&&(k/=2,f/=2);if(k<f)for(;;){m=this.items().eq(++c);
if(0===m.size()){if(!this.circular)break;m=this.items().eq(0);if(a.get(0)===m.get(0))break;m.after(m.clone(!0).attr("data-jcarousel-clone",!0));this.list().append(m);this._items=null}k+=this.dimension(m);l.last=m;l.visible=l.visible.add(m);n=g(m.css("margin-"+h));k-n<=f&&(l.fullyvisible=l.fullyvisible.add(m));if(k>=f)break}if(!this.circular&&k<f)for(c=b;!(0>--c);){m=this.items().eq(c);if(0===m.size())break;k+=this.dimension(m);l.first=m;l.visible=l.visible.add(m);n=g(m.css("margin-"+h));k-n<=f&&(l.fullyvisible=
l.fullyvisible.add(m));if(k>=f)break}return this._update(l),this.tail=0,"circular"!==this.options("wrap")&&"custom"!==this.options("wrap")&&this.index(l.last)===this.items().size()-1&&(k-=g(l.last.css("margin-"+h)),k>f&&(this.tail=k-f)),this},_position:function(a){var b=this._first,c=b.position()[this.lt];return this.rtl&&!this.vertical&&(c-=this.clipping()-this.dimension(b)),this.options("center")&&(c-=this.clipping()/2-this.dimension(b)/2),(this.index(a)>this.index(b)||this.inTail)&&this.tail?(c=
this.rtl?c-this.tail:c+this.tail,this.inTail=!0):this.inTail=!1,-c},_update:function(a){var b=this,c={target:this._target||d(),first:this._first||d(),last:this._last||d(),visible:this._visible||d(),fullyvisible:this._fullyvisible||d()},g=this.index(a.first||c.first)<this.index(c.first),f,h=function(f){var h=[],n=[];a[f].each(function(){0>c[f].index(this)&&h.push(this)});c[f].each(function(){0>a[f].index(this)&&n.push(this)});g?h=h.reverse():n=n.reverse();b._trigger("item"+f+"in",d(h));b._trigger("item"+
f+"out",d(n));b["_"+f]=a[f]};for(f in a)h(f);return this}})})(jQuery,window);
(function(d){d.jcarousel.fn.scrollIntoView=function(b,g,a){b="object"!=typeof b?parseInt(b,10):this.index(b);var e=this.index(this._fullyvisible.first());if(b<e)return this.scroll(b,g,a);if(b>=e&&b<=this.index(this._fullyvisible.last()))return d.isFunction(a)&&a.call(this,!1),this;for(var c=this.items(),e=this.clipping(),k=this.vertical?"bottom":this.rtl?"left":"right",f=0,h;;){h=c.eq(b);if(0===h.size())break;f+=this.dimension(h);if(f>=e){c=parseFloat(h.css("margin-"+k))||0;f-c!==e&&b++;break}if(0>=
b)break;b--}return this.scroll(b,g,a)}})(jQuery);
(function(d){d.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click"},_active:null,_init:function(){this.onDestroy=d.proxy(function(){this._destroy();this.carousel().one("createend.jcarousel",d.proxy(this._create,this))},this);this.onReload=d.proxy(this._reload,this);this.onEvent=d.proxy(function(b){b.preventDefault();this.carousel().jcarousel("scroll",this.options("target"))},this)},_create:function(){this.carousel().one("destroy.jcarousel",this.onDestroy).bind("reloadend.jcarousel scrollend.jcarousel",
this.onReload);this._element.bind(this.options("event")+".jcarouselcontrol",this.onEvent);this._reload()},_destroy:function(){this._element.unbind(".jcarouselcontrol",this.onEvent);this.carousel().unbind("destroy.jcarousel",this.onDestroy).unbind("reloadend.jcarousel scrollend.jcarousel",this.onReload)},_reload:function(){var b=d.jCarousel.parseTarget(this.options("target")),g=this.carousel();b.relative?g=g.jcarousel(0<b.target?"hasNext":"hasPrev"):(b="object"!=typeof b.target?g.jcarousel("items").eq(b.target):
b.target,g=0<=g.jcarousel("target").index(b));return this._active!==g&&(this._trigger(g?"active":"inactive"),this._active=g),this}})})(jQuery);
(function(d){d.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(b){return'<a href="#'+b+'">'+b+"</a>"}},_pages:{},_items:{},_init:function(){this.onDestroy=d.proxy(function(){this._destroy();this.carousel().one("createend.jcarousel",d.proxy(this._create,this))},this);this.onReload=d.proxy(this._reload,this)},_create:function(){this.carousel().one("destroy.jcarousel",this.onDestroy).bind("reloadend.jcarousel",this.onReload);this._reload()},_destroy:function(){d.fn.jcarouselControl&&
d.each(this._items,function(b,d){d.jcarouselControl("destroy")});this._element.empty();this.carousel().unbind("destroy.jcarousel",this.onDestroy).unbind("reloadend.jcarousel",this.onReload)},_reload:function(){var b=this.options("perPage");this._pages={};this._items={};d.isFunction(b)&&(b=b.call(this));if(null==b)this._pages=this._calculatePages();else for(var b=parseInt(b,10)||0,g=this.carousel().jcarousel("items"),a=1,e=0,c;;){c=g.eq(e++);if(0===c.size())break;this._pages[a]?this._pages[a]=this._pages[a].add(c):
this._pages[a]=c;0===e%b&&a++}var k=this,f=this._element.empty(),h=this.options("item");d.each(this._pages,function(a,b){var c=k._items[a]=d(h.call(k,a,b));f.append(c);d.fn.jcarouselControl&&c.jcarouselControl({carousel:k.carousel(),target:b.eq(0)})})},items:function(){return this._items},_calculatePages:function(){for(var b=this.carousel().data("jcarousel"),d=b.items(),a=b.clipping(),e=0,c=0,k=1,f={},h;;){h=d.eq(c++);if(0===h.size())break;f[k]?f[k]=f[k].add(h):f[k]=h;e+=b.dimension(h);e>=a&&(k++,
e=0)}return f}})})(jQuery);
(function(d){d.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3E3,autostart:!0},_timer:null,_init:function(){this.onDestroy=d.proxy(function(){this._destroy();this.carousel().one("createend.jcarousel",d.proxy(this._create,this))},this);this.onAnimateEnd=d.proxy(this.start,this)},_create:function(){this.carousel().one("destroy.jcarousel",this.onDestroy);this.options("autostart")&&this.start()},_destroy:function(){this.stop();this.carousel().unbind("destroy.jcarousel",this.onDestroy)},
start:function(){return this.stop(),this.carousel().one("animateend.jcarousel",this.onAnimateEnd),this._timer=setTimeout(d.proxy(function(){this.carousel().jcarousel("scroll",this.options("target"))},this),this.options("interval")),this},stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().unbind("animateend.jcarousel",this.onAnimateEnd),this}})})(jQuery);
(function(d){d.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click"},_active:null,_init:function(){this.onDestroy=d.proxy(function(){this._destroy();this.carousel().one("createend.jcarousel",d.proxy(this._create,this))},this);this.onReload=d.proxy(this._reload,this);this.onEvent=d.proxy(function(b){b.preventDefault();this.carousel().jcarousel("scroll",this.options("target"))},this)},_create:function(){this.carousel().one("destroy.jcarousel",this.onDestroy).bind("reloadend.jcarousel scrollend.jcarousel",
this.onReload);this._element.bind(this.options("event")+".jcarouselcontrol",this.onEvent);this._reload()},_destroy:function(){this._element.unbind(".jcarouselcontrol",this.onEvent);this.carousel().unbind("destroy.jcarousel",this.onDestroy).unbind("reloadend.jcarousel scrollend.jcarousel",this.onReload)},_reload:function(){var b=d.jCarousel.parseTarget(this.options("target")),g=this.carousel();b.relative?g=g.jcarousel(0<b.target?"hasNext":"hasPrev"):(b="object"!=typeof b.target?g.jcarousel("items").eq(b.target):
b.target,g=0<=g.jcarousel("target").index(b));return this._active!==g&&(this._trigger(g?"active":"inactive"),this._active=g),this}})})(jQuery);
